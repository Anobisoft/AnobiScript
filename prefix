[ "$#" -ne 2 ] && { echo "ERROR(1) Illegal number of parameters($#)" 1>&2; exit 1; }

prefix="$2";
find -E "$1" -regex '.*/[A-Z][a-z][^\/]*\.[hm]' |\
while read path;
do
  filebase=${path##*/};
  dir=$(dirname $path);
  newpath="$dir/$prefix$filebase";
  class=${filebase%\.[hm]};
  refactor "$class" "$prefix$class";
  refactor "$prefix$prefix" "$prefix";
  mv "$path" "$newpath";
done
