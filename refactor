#
#  refactor
#  AnobiScript
#
#  Created by Stanislav Pletnev on 2017-06-21
#  Copyright Â© 2017 Anobisoft. All rights reserved.
#

[ "$#" -ne 2 ] && { echo "ERROR(1) Illegal number of parameters($#)"; exit 1; }
[ $(grep --version | grep -c GNU) -gt 0 ] || { echo 'ERROR(9) GNU grep needed'; exit 9; }

grep -lIRE "$1" | while read file
do
	tmp=$(mktemp)
	awk '
{
	gsub("'"$1"'","'"$2"'",$0);
	print $0;
}
' "$file" > $tmp

mv $tmp "$file"
	
done
